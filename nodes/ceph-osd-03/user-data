#cloud-config

hostname: ceph-osd-03

chpasswd:
  expire: false
  list:
  - root:$UBUNTU_PASSWORD
  - ubuntu:$UBUNTU_PASSWORD

# Enable password authentication with the SSH daemon
ssh_pwauth: false

ssh_authorized_keys:
  - $UBUNTU_AUTHORIZED_KEY

## Update apt database and upgrade packages on first boot
package_update: true
package_upgrade: true
package_reboot_if_required: true

packages:
- curl
- wget
- htop
# - cephadm

runcmd:
- ln -sfn /run/systemd/resolve/resolv.conf /etc/resolv.conf
- sync
- reboot -f
- sed -i '/^127\.0\.0\.1\s/s/$/ '"localhost ceph-osd-03"'/' /etc/hosts
- sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config

device_aliases: {'m2osd1': '/dev/sda'}
disk_setup:
  m2osd1:
    table_type: gpt
    layout: False
    overwrite: True